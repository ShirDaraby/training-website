<?xml version="1.0" encoding="utf-8"?>
<odoo>

<!-- SHOP GENERAL PAGE ////////////////////////////////// -->
<template inherit_id="website_sale.products" id="products" name="Products">
    <xpath expr="//t[@t-call='website_sale.pricelist_list']" position="replace" />

    <xpath expr="//*[@id='oe_structure_website_sale_products_1']" position="inside">
         <section class="s_title bg-black-50 o_colored_level s_parallax_no_overflow_hidden oe_img_bg o_bg_img_center pt88 pb88" data-vcss="001" data-snippet="s_title" data-scroll-background-ratio="0" data-name="Title" style="background-image: url(&quot;/web/image/website_airproof_ecommerce.img_topview3&quot;);" data-mimetype="image/png" data-resize-width="1439">
            <div class="o_we_bg_filter bg-black-50"/>
            <div class="container">
                <h2 >Discover our amazing products</h2>
            </div>
        </section>
   </xpath>

</template>

<!-- Disable Search public price -->
<template id="search" inherit_id="website_sale.search" name="Search">
    <xpath expr="//t[@t-call='website.website_search_box_input']" position="replace" />
</template>

<!-- Cards Link -->
<template id="products_item" inherit_id="website_sale.products_item" name="Products item">
     <xpath expr="//div[hasclass('o_wsale_product_information')]" position="inside" >
        <span class="small text-dark pt-3 pb-1" >Discover more<img src="/web/image/website_airproof_ecommerce.img_arrow_small" alt="Arrow icon" class="ml-2"/>
        </span>
     </xpath>
</template>


<!-- Enable and place after add to cart button the Wishlist option  -->
<template id="product" inherit_id="website_sale.product" name="Product">

    <!-- Disable Pricelist on product page -->
    <xpath expr="//t[@t-call='website_sale.pricelist_list']" position="replace" />

    <!-- Hide variants -->
    <xpath expr="//*[@id='product_attributes_simple']" position="replace" />

   <xpath expr="//*[@id='add_to_cart']" position="after">
          <button t-if="product_variant" type="button" role="button" class="btn btn-lg btn-link px-3 o_add_wishlist_dyn" t-att-disabled='in_wish or None' t-att-data-product-template-id="product.id" t-att-data-product-product-id="product_variant.id" data-action="o_wishlist" title="Add to wishlist"><i style=":hover { color: o-color('o-color-3');}" class="fa fa-heart-o mr-2" role="img" aria-label="Add to wishlist"/>Add to wishlist</button>     
   </xpath>

   <xpath expr="//*[@id='add_to_cart']" position="replace">
        <a data-animation-selector=".o_wsale_product_images" role="button" id="add_to_cart" href="#" class="btn btn-primary x_btn_shape js_check_product a-submit flex-grow-1" >
            <img src="/web/image/website_airproof_ecommerce.img_shopping" alt="Shopping icon" class="img img-fluid" style="vertical-align: text-top;" />
            <span class="font-weight-bold">ADD TO CART</span>
         </a>
   </xpath>

    <!-- Move breadcrumb in product page -->
     <xpath expr="//*[hasclass('breadcrumb')]" position="replace"/>

    <xpath expr="//h1" position="before" >
         <ol class="breadcrumb mb-2 p-0">
            <li class="breadcrumb-item o_not_editable">
               <a t-att-href="keep(category=0)">All Products</a>
            </li>
            <li t-if="category" class="breadcrumb-item">
               <a t-att-href="keep('/shop/category/%s' % slug(category), category=0)" t-field="category.name" />
            </li>
            <li class="breadcrumb-item active">
               <span t-field="product.name" />
            </li>
         </ol>
    </xpath>

    <!-- Disable description in product page -->
     <xpath expr="//*[@id='product_full_description']" position="replace" />
     
     <!-- Place specifications in the product details block -->
     <xpath expr="//*[@id='product_details']" position="inside" >
      <t t-set="categories" t-value="product.valid_product_template_attribute_line_ids._prepare_categories_for_display()"/>
            <t t-if="categories">
                <section class="pt32 pb32" id="product_full_spec">
                    <div class="container">
                        <div class="d-flex justify-content-between align-items-center mb-4">
                            <h6 class="m-0">Specifications</h6>
                        </div>
                        <div id="product_specifications">
                            <div class="row">
                                <t t-foreach="categories" t-as="category">
                                    <div class="col">
                                        <table class="table">
                                            <t t-if="len(categories) > 1">
                                                <tr>
                                                    <th class="text-left font-weight-bold" t-att-colspan="2">
                                                        <span t-if="category" t-field="category.name"/>
                                                        <span t-else="">Uncategorized</span>
                                                    </th>
                                                </tr>
                                            </t>
                                            <tr t-foreach="categories[category].filtered(lambda l: len(l.value_ids) > 1)" t-as="ptal">
                                                <td class="w-25 font-weight-bold"><span t-field="ptal.attribute_id.name"/></td>
                                                <td class="w-75 text-muted">
                                                    <t t-foreach="ptal.value_ids" t-as="pav">
                                                        <span t-field="pav.name"/><t t-if="not pav_last"> or</t>
                                                    </t>
                                                </td>
                                            </tr>
                                            <t t-set="single_value_attributes" t-value="categories[category]._prepare_single_value_for_display()"/>
                                            <tr t-foreach="single_value_attributes" t-as="attribute">
                                                <td class="w-25"><span t-field="attribute.name"/></td>
                                                <td class="w-75 text-muted">
                                                    <t t-foreach="single_value_attributes[attribute]" t-as="ptal">
                                                        <span t-field="ptal.product_template_value_ids._only_active().name"/><t t-if="not ptal_last">, </t>
                                                    </t>
                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                </t>
                            </div>
                        </div>
                    </div>
                </section>
            </t>
    </xpath>

    <!-- Add specific content after the product details in product page -->
    <xpath expr="//*[@id='oe_structure_website_sale_product_2']" position="inside" >

        <!-- Block six reasons -->
        <section class="s_text_image o_colored_level pt48 o_cc o_cc3 pb48" data-snippet="s_text_image" data-name="Text - Image" data-oe-shape-data="{'shape':'illustration/airproof/waves3','colors':{'c1':'#CEF8A1'},'flip':[]}" style="background-color: #F0FDE3;">
            <div class="o_we_shape o_illustration_airproof_waves3" style="background-image: url(/web_editor/shape/illustration/airproof/waves3.svg?c1=%23CEF8A1);"/>
            <div class="container">
                <div class="row align-items-center">
                    <div class="pt16 pb16 o_colored_level col-lg-5">
                        <h1>Six reasons to buy&amp;nbsp;the Airproof Mini.</h1>
                        <p>
                            Airproof Mini is 
                            <font class="bg-o-color-3">more than just a mini drone.</font>
                            <br/>
                            The lightweight body supports powerful features, making it a great choice for first-time flyers.
                        </p>
                        <p>
                            <a href="#" class="mb-2 btn btn-secondary btn-lg x_btn_shape" >Read more<img src="/web/image/website_airproof_ecommerce.img_arrow" alt="Arrow icon" class="img img-fluid ml-2" /></a>
                        </p>
                    </div>

                    <div class="pt16 pb16 o_colored_level col-lg-6 offset-lg-1">
                        <img src="/web/image/website_airproof_ecommerce.img_drone_bluebg" alt="drone" class="img img-fluid mx-auto" data-mimetype="image/png" data-resize-width="690"/>
                    </div>
                </div>
            </div>
        </section>
      
    </xpath>

</template>

<!-- Change the design for the block alternative products in product page -->
<template id="recommended_products" inherit_id="website_sale.recommended_products" name="Recommended products">
    <xpath expr="//*[hasclass('container')]" position="replace">
        <section class="s_title pt40 pb40 o_colored_level o_cc o_cc5" data-vcss="001" data-snippet="s_title" data-name="Title" style="background-color: #F8F8F8 !important;" t-if="alternative_products" >
            <div class="s_allow_columns container">
                <div class="row">
                    <div class="o_colored_level col">
                        <h1 class="text-dark text-center font-weight-bold" >
                            You might also like
                        </h1>
                    </div>
                </div>
                <div class="row mt16">
                    <t t-foreach="alternative_products" t-as="alt_product">
                        <div class="col col-lg-4" t-att-data-publish="alt_product.website_published and 'on' or 'off'">

                            <div class="mt16 text-center" style="height: 100%;">
                                <t t-set="combination_info" t-value="alt_product._get_combination_info()"/>
                                <t t-set="product_variant" t-value="alt_product.env['product.product'].browse(combination_info['product_id'])"/>

                                <!-- card look -->
                                <div class="o_carousel_product_card card h-100 w-100" t-if="product_variant">
                                    <a t-att-href="product_variant.website_url" class="o_carousel_product_img_link" > 
                                        <div t-if="product_variant" t-field="product_variant.image_512" t-options="{'widget': 'image', 'qweb_img_responsive': False, 'class': 'w-100 h-100 o_carousel_product_card_img_top' }" />
                                    </a>

                                    <div class="o_carousel_product_card_body p-4">
                                        <a t-att-href="product_variant.website_url" class="text-decoration-none h-100 d-flex flex-column justify-content-between">
                                            <div>
                                                <div class="h6 text-left card-title mb-1" t-field="alt_product.name"/>
                                                <div class="h6 mb-0 text-left font-weight-bold" t-if="combination_info['price']" t-esc="combination_info['price']" t-options="{'widget': 'monetary', 'display_currency': website.currency_id}"/>
                                            </div>
                                            <span class="text-left small text-dark pt-3 pb-1" >Discover more<img src="/web/image/website_airproof_ecommerce.img_arrow_small" alt="Arrow icon" class="ml-2"/>
                                            </span>
                                        </a>
                                    </div>

                                </div>

                            </div>
                            
                        </div>
                    </t>
                </div>
            </div>
        </section>
                
    </xpath>
</template>

</odoo>
